---
const { heading } = Astro.props;

const hasChildren = Array.isArray(heading.subheadings) && heading.subheadings.length > 0;
const nestedListClasses = [
  "space-y-1 mt-2",
  heading.depth > 1 ? "border-l border-base-content/15 pl-3" : "",
]
  .filter(Boolean)
  .join(" ");
---

<li>
  <a
    href={"#" + heading.slug}
    class="block rounded-md px-2 py-1 transition-colors duration-150 hover:bg-base-100/60 hover:text-primary focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary/40"
  >
    {heading.text}
  </a>
  {
    hasChildren && (
      <ul class={nestedListClasses}>
        {heading.subheadings.map((subheading: any) => (
          <Astro.self heading={subheading} />
        ))}
      </ul>
    )
  }
</li>
